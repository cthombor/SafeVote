<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='The "adjusted rank" of a candidate is their ranking \(r\) plus their
scaled "winning margin". The scaled margin is
\(e^{-cx/\sqrt{n}}\), where \(x\) is the adjusted margin (i.e. the number
of votes by which this candidate is ahead of the next-weaker candidate,
adjusted for the number of ballots \(n\) and the number of seats \(s\)),
and \(c&amp;gt;0\) is the margin-scaling parameter cMargin.'><title>plot() method for the result of an experiment with varying numbers of ballots — plot.SafeRankExpt • SafeVote</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="plot() method for the result of an experiment with varying numbers of ballots — plot.SafeRankExpt"><meta property="og:description" content='The "adjusted rank" of a candidate is their ranking \(r\) plus their
scaled "winning margin". The scaled margin is
\(e^{-cx/\sqrt{n}}\), where \(x\) is the adjusted margin (i.e. the number
of votes by which this candidate is ahead of the next-weaker candidate,
adjusted for the number of ballots \(n\) and the number of seats \(s\)),
and \(c&amp;gt;0\) is the margin-scaling parameter cMargin.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">SafeVote</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>plot() method for the result of an experiment with varying numbers of ballots</h1>
      
      <div class="d-none name"><code>plot.SafeRankExpt.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The "adjusted rank" of a candidate is their ranking \(r\) plus their
scaled "winning margin". The scaled margin is
\(e^{-cx/\sqrt{n}}\), where \(x\) is the adjusted margin (i.e. the number
of votes by which this candidate is ahead of the next-weaker candidate,
adjusted for the number of ballots \(n\) and the number of seats \(s\)),
and \(c&gt;0\) is the margin-scaling parameter <code>cMargin</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for SafeRankExpt</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  facetWrap <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  nResults <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  anBallots <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cMargin <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Ballots"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"Adjusted Rank"</span>,</span>
<span>  title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"(default)"</span>,</span>
<span>  line <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  boxPlot <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  boxPlotCutInterval <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  pointSize <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>object containing experimental results</p></dd>


<dt>facetWrap</dt>
<dd><p>TRUE provides per-candidate scatterplots</p></dd>


<dt>nResults</dt>
<dd><p>number of candidates whose results are plotted (omitting
the least-favoured candidates first)</p></dd>


<dt>anBallots, cMargin</dt>
<dd><p>parameters in the rank-adjustment formula</p></dd>


<dt>xlab, ylab</dt>
<dd><p>axis labels</p></dd>


<dt>title</dt>
<dd><p>overall title for the plot.  Default: NULL</p></dd>


<dt>subtitle</dt>
<dd><p>subtitle for the plot.  Default: value of nSeats and
any non-zero rank-adjustment parameters</p></dd>


<dt>line</dt>
<dd><p>TRUE will connect points with lines, and will disable jitter</p></dd>


<dt>boxPlot</dt>
<dd><p>TRUE for a boxplot, rather than the default xy-scatter</p></dd>


<dt>boxPlotCutInterval</dt>
<dd><p>parameter of boxplot, default 10</p></dd>


<dt>pointSize</dt>
<dd><p>diameter of points</p></dd>


<dt>...</dt>
<dd><p>params for generic plot()</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>graphics object, with side-effect in RStudio Plots pane</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The default value of <code>cMargin=1.0</code> draws visual attention to candidates with
a very small winning margin, as their adjusted rank is very near to
\(r+1\).  Candidates with anything more than a small winning margin have
only a small rank adjustment, due to the exponential scaling.</p>
<p>A scaling linear in \(s/n\) is applied to margins when <code>anBallots&gt;0</code>.  Such
a linear scaling may be a helpful way to visualise the winning margins in STV
elections because the margin of victory for an elected candidate is typically
not much larger than the quota of \(n/(s+1)\) (Droop) or \(n/s\) (Hare).
The linear scaling factor is \(as/n\), where \(a\) is the value of
<code>anBallots</code>, \(s\) is the number of seats, and \(n\) is the number of
ballots. For plotting on the (inverted) adjusted rank scale, the
linearly-scaled margin is added to the candidate's rank.  Note that the
linearly-scaled margins are zero when \(a=0\), and thus have no effect on
the adjusted rank.  You might want to increase the value of <code>anBallots</code>,
starting from 1.0, until the winning candidate's adjusted rank is 1.0 when
all ballots are counted, then confirm that the adjusted ranks of other
candidates are still congruent with their ranking (i.e. that the
rank-adjustment is less than 1 in all cases except perhaps on an initial
transient with small numbers of ballots).</p>
<p>When both <code>anBallots</code> and <code>cMargins</code> are non-zero, the ranks are adjusted
with both exponentially-scaled margins and linearly-scaled margins. The
resulting plot would be difficult to interpret in a valid way.</p>
<p>Todo: Accept a list of SafeVoteExpt objects.</p>
<p>Todo: Multiple counts with the same number of ballots could be summarised
with a box-and-whisker graphic, rather than a set of jittered points.</p>
<p>Todo: Consider developing a linear scaling that is appropriate for
plotting stochastic experimental data derived from Condorcet elections.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Clark Thomborson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

